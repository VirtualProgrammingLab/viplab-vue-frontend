<template>
  <div class="gridplot-component border">
    <select name="GraphType" @change="onChange($event)" class="form-control" v-model="dropdownVModel">
      <option value="2DGitterplot">2D Gitterplot</option>
      <option value="3DKaestchen">3D KÃ¤stchen</option>
      <option value="3DInterpoliert">3D Interpoliert</option>
    </select>
    <div>
      <Plotly ref="plot" :data="data" :layout="layout" :display-mode-bar="true" :to-image-button-options="imageConfig"></Plotly>
    </div>
  </div>
</template>

<script>
import * as Parser from "../parse.js";

import { Plotly } from '@rleys/vue-plotly-basic';

export default {
  name: 'GridPlot',
  components: {
    Plotly
  },
  props: {
    plotData: String,
  },
  data() {
    return {
      // example: '{ "identifier" : "vipplot.vgfc", "value" : "Gridplot\n# x-range -3.000000 3.000000\n# y-range -3.000000 3.000000\n# x-count 50\n# y-count 50\n# scale 1 1 1\n# min-color 255 0 0\n# max-color 0 0 255\n# time 0\n# label piezometric head\n-0.041722 -0.057869 -0.046557 -0.013876 0.025861 0.057478 0.070762 0.062902 0.037695 0.002846 -0.033097 -0.063112 -0.082901 -0.091043 -0.088417 -0.077335 -0.060689 -0.041297 -0.021508 -0.003044 0.012990 0.026000 0.035745 0.042192 0.045392 0.045392 0.042192 0.035745 0.026000 0.012990 -0.003044 -0.021508 -0.041297 -0.060689 -0.077335 -0.088417 -0.091043 -0.082901 -0.063112 -0.033097 0.002846 0.037695 0.062902 0.070762 0.057478 0.025861 -0.013876 -0.046557 -0.057869 -0.041722 \n-0.057869 -0.045470 -0.010220 0.031333 0.061923 0.070659 0.055796 0.023386 -0.016389 -0.053167 -0.079242 -0.090789 -0.087679 -0.072453 -0.049021 -0.021508 0.006530 0.032503 0.054864 0.072962 0.086815 0.096840 0.103631 0.107773 0.109721 0.109721 0.107773 0.103631 0.096840 0.086815 0.072962 0.054864 0.032503 0.006530 -0.021508 -0.049021 -0.072453 -0.087679 -0.090789 -0.079242 -0.053167 -0.016389 0.023386 0.055796 0.070659 0.061923 0.031333 -0.010220 -0.045470 -0.057869 \n-0.046557 -0.010220 0.033117 0.063841 0.069828 0.049923 0.012199 -0.030748 -0.066773 -0.087610 -0.090131 -0.075785 -0.049021 -0.015479 0.019488 0.051731 0.078660 0.099177 0.113362 0.122073 0.126573 0.128221 0.128267 0.127715 0.127263 0.127263 0.127715 0.128267 0.128221 0.126573 0.122073 0.113362 0.099177 0.078660 0.051731 0.019488 -0.015479 -0.049021 -0.075785 -0.090131 -0.087610 -0.066773 -0.030748 0.012199 0.049923 0.069828 0.063841 0.033117 -0.010220 -0.046557 \n-0.013876 0.031333 0.063841 0.069422 0.046671 0.005210 -0.040028 -0.075005 -0.090789 -0.084966 -0.060689 -0.024467 0.016236 0.054864 0.086815 0.109721 0.123182 0.128221 0.126693 0.120763 0.112540 0.103850 0.096136 0.090442 0.087434 0.087434 0.090442 0.096136 0.103850 0.112540 0.120763 0.126693 0.128221 0.123182 0.109721 0.086815 0.054864 0.016236 -0.024467 -0.060689 -0.084966 -0.090789 -0.075005 -0.040028 0.005210 0.046671 0.069422 0.063841 0.031333 -0.013876 \n0.025861 0.061923 0.069828 0.046671 0.002846 -0.044529 -0.079242 -0.091320 -0.078807 -0.046503 -0.003044 0.042192 0.081434 0.109721 0.125089 0.128050 0.120763 0.106195 0.087434 0.067246 0.047852 0.030880 0.017423 0.008154 0.003440 0.003440 0.008154 0.017423 0.030880 0.047852 0.067246 0.087434 0.106195 0.120763 0.128050 0.125089 0.109721 0.081434 0.042192 -0.003044 -0.046503 -0.078807 -0.091320 -0.079242 -0.044529 0.002846 0.046671 0.069828 0.061923 0.025861 \n0.057478 0.070659 0.049923 0.005210 -0.044529 -0.080528 -0.091093 -0.074157 -0.035878 0.012990 0.061041 0.099177 0.122073 0.128267 0.119357 0.098819 0.070855 0.039515 0.008154 -0.020780 -0.045731 -0.065879 -0.080922 -0.090852 -0.095774 -0.095774 -0.090852 -0.080922 -0.065879 -0.045731 -0.020780 0.008154 0.039515 0.070855 0.098819 0.119357 0.128267 0.122073 0.099177 0.061041 0.012990 -0.035878 -0.074157 -0.091093 -0.080528 -0.044529 0.005210 0.049923 0.070659 0.057478 \n0.070762 0.055796 0.012199 -0.040028 -0.079242 -0.091093 -0.072453 -0.030262 0.022744 0.072962 0.109721 0.127151 0.124266 0.103850 0.070855 0.030880 -0.010977 -0.050765 -0.085900 -0.115072 -0.137975 -0.154968 -0.166747 -0.174075 -0.177568 -0.177568 -0.174075 -0.166747 -0.154968 -0.137975 -0.115072 -0.085900 -0.050765 -0.010977 0.030880 0.070855 0.103850 0.124266 0.127151 0.109721 0.072962 0.022744 -0.030262 -0.072453 -0.091093 -0.079242 -0.040028 0.012199 0.055796 0.070762 \n0.062902 0.023386 -0.030748 -0.075005 -0.091320 -0.074157 -0.030262 0.026000 0.078660 0.115049 0.128351 0.117830 0.087434 0.043722 -0.006129 -0.055804 -0.100662 -0.137975 -0.166747 -0.187312 -0.200857 -0.208985 -0.213345 -0.215375 -0.216117 -0.216117 -0.215375 -0.213345 -0.208985 -0.200857 -0.187312 -0.166747 -0.137975 -0.100662 -0.055804 -0.006129 0.043722 0.087434 0.117830 0.128351 0.115049 0.078660 0.026000 -0.030262 -0.074157 -0.091320 -0.075005 -0.030748 0.023386 0.062902 \n0.037695 -0.016389 -0.066773 -0.090789 -0.078807 -0.035878 0.022744 0.078660 0.116645 0.128267 0.112540 0.074370 0.021972 -0.035694 -0.090852 -0.137975 -0.174075 -0.198437 -0.212064 -0.217041 -0.215953 -0.211428 -0.205816 -0.200994 -0.198255 -0.198255 -0.200994 -0.205816 -0.211428 -0.215953 -0.217041 -0.212064 -0.198437 -0.174075 -0.137975 -0.090852 -0.035694 0.021972 0.074370 0.112540 0.128267 0.116645 0.078660 0.022744 -0.035878 -0.078807 -0.090789 -0.066773 -0.016389 0.037695 \n0.002846 -0.053167 -0.087610 -0.084966 -0.046503 0.012990 0.072962 0.115049 0.128267 0.110542 0.067246 0.008154 -0.055804 -0.115072 -0.162922 -0.195868 -0.213345 -0.216984 -0.209771 -0.195296 -0.177174 -0.158657 -0.142427 -0.130500 -0.124207 -0.124207 -0.130500 -0.142427 -0.158657 -0.177174 -0.195296 -0.209771 -0.216984 -0.213345 -0.195868 -0.162922 -0.115072 -0.055804 0.008154 0.067246 0.110542 0.128267 0.115049 0.072962 0.012990 -0.046503 -0.084966 -0.087610 -0.053167 0.002846 \n-0.033097 -0.079242 -0.090131 -0.060689 -0.003044 0.061041 0.109721 0.128351 0.112540 0.067246 0.003440 -0.065879 -0.129008 -0.177568 -0.207194 -0.217217 -0.209771 -0.188715 -0.158657 -0.124207 -0.089498 -0.057940 -0.032150 -0.013987 -0.004623 -0.004623 -0.013987 -0.032150 -0.057940 -0.089498 -0.124207 -0.158657 -0.188715 -0.209771 -0.217217 -0.207194 -0.177568 -0.129008 -0.065879 0.003440 0.067246 0.112540 0.128351 0.109721 0.061041 -0.003044 -0.060689 -0.090131 -0.079242 -0.033097 \n-0.063112 -0.090789 -0.075785 -0.024467 0.042192 0.099177 0.127151 0.117830 0.074370 0.008154 -0.065879 -0.133527 -0.184190 -0.212064 -0.215953 -0.198255 -0.163621 -0.117696 -0.066137 -0.013987 0.034636 0.076606 0.109709 0.132485 0.144072 0.144072 0.132485 0.109709 0.076606 0.034636 -0.013987 -0.066137 -0.117696 -0.163621 -0.198255 -0.215953 -0.212064 -0.184190 -0.133527 -0.065879 0.008154 0.074370 0.117830 0.127151 0.099177 0.042192 -0.024467 -0.075785 -0.090789 -0.063112 \n-0.082901 -0.087679 -0.049021 0.016236 0.081434 0.122073 0.124266 0.087434 0.021972 -0.055804 -0.129008 -0.184190 -0.213345 -0.214107 -0.188715 -0.142427 -0.081918 -0.013987 0.055298 0.121030 0.179566 0.228415 0.266005 0.291434 0.304243 0.304243 0.291434 0.266005 0.228415 0.179566 0.121030 0.055298 -0.013987 -0.081918 -0.142427 -0.188715 -0.214107 -0.213345 -0.184190 -0.129008 -0.055804 0.021972 0.087434 0.124266 0.122073 0.081434 0.016236 -0.049021 -0.087679 -0.082901 \n-0.091043 -0.072453 -0.015479 0.054864 0.109721 0.128267 0.103850 0.043722 -0.035694 -0.115072 -0.177568 -0.212064 -0.214107 -0.185091 -0.130500 -0.057940 0.024558 0.109709 0.191626 0.266005 0.330018 0.382027 0.421243 0.447393 0.460450 0.460450 0.447393 0.421243 0.382027 0.330018 0.266005 0.191626 0.109709 0.024558 -0.057940 -0.130500 -0.185091 -0.214107 -0.212064 -0.177568 -0.115072 -0.035694 0.043722 0.103850 0.128267 0.109721 0.054864 -0.015479 -0.072453 -0.091043 \n-0.088417 -0.049021 0.019488 0.086815 0.125089 0.119357 0.070855 -0.006129 -0.090852 -0.162922 -0.207194 -0.215953 -0.188715 -0.130500 -0.049541 0.044884 0.144072 0.240863 0.330018 0.408164 0.473487 0.525305 0.563643 0.588855 0.601338 0.601338 0.588855 0.563643 0.525305 0.473487 0.408164 0.330018 0.240863 0.144072 0.044884 -0.049541 -0.130500 -0.188715 -0.215953 -0.207194 -0.162922 -0.090852 -0.006129 0.070855 0.119357 0.125089 0.086815 0.019488 -0.049021 -0.088417 \n-0.077335 -0.021508 0.051731 0.109721 0.128050 0.098819 0.030880 -0.055804 -0.137975 -0.195868 -0.217217 -0.198255 -0.142427 -0.057940 0.044884 0.155784 0.266005 0.368983 0.460450 0.538145 0.601338 0.650303 0.685836 0.708867 0.720166 0.720166 0.708867 0.685836 0.650303 0.601338 0.538145 0.460450 0.368983 0.266005 0.155784 0.044884 -0.057940 -0.142427 -0.198255 -0.217217 -0.195868 -0.137975 -0.055804 0.030880 0.098819 0.128050 0.109721 0.051731 -0.021508 -0.077335 \n-0.060689 0.006530 0.078660 0.123182 0.120763 0.070855 -0.010977 -0.100662 -0.174075 -0.213345 -0.209771 -0.163621 -0.081918 0.024558 0.144072 0.266005 0.382027 0.486497 0.576288 0.650303 0.708867 0.753134 0.784584 0.804634 0.814369 0.814369 0.804634 0.784584 0.753134 0.708867 0.650303 0.576288 0.486497 0.382027 0.266005 0.144072 0.024558 -0.081918 -0.163621 -0.209771 -0.213345 -0.174075 -0.100662 -0.010977 0.070855 0.120763 0.123182 0.078660 0.006530 -0.060689 \n-0.041297 0.032503 0.099177 0.128221 0.106195 0.039515 -0.050765 -0.137975 -0.198437 -0.216984 -0.188715 -0.117696 -0.013987 0.109709 0.240863 0.368983 0.486497 0.588855 0.674117 0.742306 0.794704 0.833231 0.859931 0.876616 0.884610 0.884610 0.876616 0.859931 0.833231 0.794704 0.742306 0.674117 0.588855 0.486497 0.368983 0.240863 0.109709 -0.013987 -0.117696 -0.188715 -0.216984 -0.198437 -0.137975 -0.050765 0.039515 0.106195 0.128221 0.099177 0.032503 -0.041297 \n-0.021508 0.054864 0.113362 0.126693 0.087434 0.008154 -0.085900 -0.166747 -0.212064 -0.209771 -0.158657 -0.066137 0.055298 0.191626 0.330018 0.460450 0.576288 0.674117 0.753134 0.814369 0.859931 0.892366 0.914165 0.927437 0.933683 0.933683 0.927437 0.914165 0.892366 0.859931 0.814369 0.753134 0.674117 0.576288 0.460450 0.330018 0.191626 0.055298 -0.066137 -0.158657 -0.209771 -0.212064 -0.166747 -0.085900 0.008154 0.087434 0.126693 0.113362 0.054864 -0.021508 \n-0.003044 0.072962 0.122073 0.120763 0.067246 -0.020780 -0.115072 -0.187312 -0.217041 -0.195296 -0.124207 -0.013987 0.121030 0.266005 0.408164 0.538145 0.650303 0.742306 0.814369 0.868388 0.907147 0.933683 0.950824 0.960891 0.965507 0.965507 0.960891 0.950824 0.933683 0.907147 0.868388 0.814369 0.742306 0.650303 0.538145 0.408164 0.266005 0.121030 -0.013987 -0.124207 -0.195296 -0.217041 -0.187312 -0.115072 -0.020780 0.067246 0.120763 0.122073 0.072962 -0.003044 \n0.012990 0.086815 0.126573 0.112540 0.047852 -0.045731 -0.137975 -0.200857 -0.215953 -0.177174 -0.089498 0.034636 0.179566 0.330018 0.473487 0.601338 0.708867 0.794704 0.859931 0.907147 0.939665 0.960891 0.973894 0.981139 0.984328 0.984328 0.981139 0.973894 0.960891 0.939665 0.907147 0.859931 0.794704 0.708867 0.601338 0.473487 0.330018 0.179566 0.034636 -0.089498 -0.177174 -0.215953 -0.200857 -0.137975 -0.045731 0.047852 0.112540 0.126573 0.086815 0.012990 \n0.026000 0.096840 0.128221 0.103850 0.030880 -0.065879 -0.154968 -0.208985 -0.211428 -0.158657 -0.057940 0.076606 0.228415 0.382027 0.525305 0.650303 0.753134 0.833231 0.892366 0.933683 0.960891 0.977661 0.987226 0.992141 0.994156 0.994156 0.992141 0.987226 0.977661 0.960891 0.933683 0.892366 0.833231 0.753134 0.650303 0.525305 0.382027 0.228415 0.076606 -0.057940 -0.158657 -0.211428 -0.208985 -0.154968 -0.065879 0.030880 0.103850 0.128221 0.096840 0.026000 \n0.035745 0.103631 0.128267 0.096136 0.017423 -0.080922 -0.166747 -0.213345 -0.205816 -0.142427 -0.032150 0.109709 0.266005 0.421243 0.563643 0.685836 0.784584 0.859931 0.914165 0.950824 0.973894 0.987226 0.994156 0.997295 0.998418 0.998418 0.997295 0.994156 0.987226 0.973894 0.950824 0.914165 0.859931 0.784584 0.685836 0.563643 0.421243 0.266005 0.109709 -0.032150 -0.142427 -0.205816 -0.213345 -0.166747 -0.080922 0.017423 0.096136 0.128267 0.103631 0.035745 \n0.042192 0.107773 0.127715 0.090442 0.008154 -0.090852 -0.174075 -0.215375 -0.200994 -0.130500 -0.013987 0.132485 0.291434 0.447393 0.588855 0.708867 0.804634 0.876616 0.927437 0.960891 0.981139 0.992141 0.997295 0.999241 0.999766 0.999766 0.999241 0.997295 0.992141 0.981139 0.960891 0.927437 0.876616 0.804634 0.708867 0.588855 0.447393 0.291434 0.132485 -0.013987 -0.130500 -0.200994 -0.215375 -0.174075 -0.090852 0.008154 0.090442 0.127715 0.107773 0.042192 \n0.045392 0.109721 0.127263 0.087434 0.003440 -0.095774 -0.177568 -0.216117 -0.198255 -0.124207 -0.004623 0.144072 0.304243 0.460450 0.601338 0.720166 0.814369 0.884610 0.933683 0.965507 0.984328 0.994156 0.998418 0.999766 0.999991 0.999991 0.999766 0.998418 0.994156 0.984328 0.965507 0.933683 0.884610 0.814369 0.720166 0.601338 0.460450 0.304243 0.144072 -0.004623 -0.124207 -0.198255 -0.216117 -0.177568 -0.095774 0.003440 0.087434 0.127263 0.109721 0.045392 \n0.045392 0.109721 0.127263 0.087434 0.003440 -0.095774 -0.177568 -0.216117 -0.198255 -0.124207 -0.004623 0.144072 0.304243 0.460450 0.601338 0.720166 0.814369 0.884610 0.933683 0.965507 0.984328 0.994156 0.998418 0.999766 0.999991 0.999991 0.999766 0.998418 0.994156 0.984328 0.965507 0.933683 0.884610 0.814369 0.720166 0.601338 0.460450 0.304243 0.144072 -0.004623 -0.124207 -0.198255 -0.216117 -0.177568 -0.095774 0.003440 0.087434 0.127263 0.109721 0.045392 \n0.042192 0.107773 0.127715 0.090442 0.008154 -0.090852 -0.174075 -0.215375 -0.200994 -0.130500 -0.013987 0.132485 0.291434 0.447393 0.588855 0.708867 0.804634 0.876616 0.927437 0.960891 0.981139 0.992141 0.997295 0.999241 0.999766 0.999766 0.999241 0.997295 0.992141 0.981139 0.960891 0.927437 0.876616 0.804634 0.708867 0.588855 0.447393 0.291434 0.132485 -0.013987 -0.130500 -0.200994 -0.215375 -0.174075 -0.090852 0.008154 0.090442 0.127715 0.107773 0.042192 \n0.035745 0.103631 0.128267 0.096136 0.017423 -0.080922 -0.166747 -0.213345 -0.205816 -0.142427 -0.032150 0.109709 0.266005 0.421243 0.563643 0.685836 0.784584 0.859931 0.914165 0.950824 0.973894 0.987226 0.994156 0.997295 0.998418 0.998418 0.997295 0.994156 0.987226 0.973894 0.950824 0.914165 0.859931 0.784584 0.685836 0.563643 0.421243 0.266005 0.109709 -0.032150 -0.142427 -0.205816 -0.213345 -0.166747 -0.080922 0.017423 0.096136 0.128267 0.103631 0.035745 \n0.026000 0.096840 0.128221 0.103850 0.030880 -0.065879 -0.154968 -0.208985 -0.211428 -0.158657 -0.057940 0.076606 0.228415 0.382027 0.525305 0.650303 0.753134 0.833231 0.892366 0.933683 0.960891 0.977661 0.987226 0.992141 0.994156 0.994156 0.992141 0.987226 0.977661 0.960891 0.933683 0.892366 0.833231 0.753134 0.650303 0.525305 0.382027 0.228415 0.076606 -0.057940 -0.158657 -0.211428 -0.208985 -0.154968 -0.065879 0.030880 0.103850 0.128221 0.096840 0.026000 \n0.012990 0.086815 0.126573 0.112540 0.047852 -0.045731 -0.137975 -0.200857 -0.215953 -0.177174 -0.089498 0.034636 0.179566 0.330018 0.473487 0.601338 0.708867 0.794704 0.859931 0.907147 0.939665 0.960891 0.973894 0.981139 0.984328 0.984328 0.981139 0.973894 0.960891 0.939665 0.907147 0.859931 0.794704 0.708867 0.601338 0.473487 0.330018 0.179566 0.034636 -0.089498 -0.177174 -0.215953 -0.200857 -0.137975 -0.045731 0.047852 0.112540 0.126573 0.086815 0.012990 \n-0.003044 0.072962 0.122073 0.120763 0.067246 -0.020780 -0.115072 -0.187312 -0.217041 -0.195296 -0.124207 -0.013987 0.121030 0.266005 0.408164 0.538145 0.650303 0.742306 0.814369 0.868388 0.907147 0.933683 0.950824 0.960891 0.965507 0.965507 0.960891 0.950824 0.933683 0.907147 0.868388 0.814369 0.742306 0.650303 0.538145 0.408164 0.266005 0.121030 -0.013987 -0.124207 -0.195296 -0.217041 -0.187312 -0.115072 -0.020780 0.067246 0.120763 0.122073 0.072962 -0.003044 \n-0.021508 0.054864 0.113362 0.126693 0.087434 0.008154 -0.085900 -0.166747 -0.212064 -0.209771 -0.158657 -0.066137 0.055298 0.191626 0.330018 0.460450 0.576288 0.674117 0.753134 0.814369 0.859931 0.892366 0.914165 0.927437 0.933683 0.933683 0.927437 0.914165 0.892366 0.859931 0.814369 0.753134 0.674117 0.576288 0.460450 0.330018 0.191626 0.055298 -0.066137 -0.158657 -0.209771 -0.212064 -0.166747 -0.085900 0.008154 0.087434 0.126693 0.113362 0.054864 -0.021508 \n-0.041297 0.032503 0.099177 0.128221 0.106195 0.039515 -0.050765 -0.137975 -0.198437 -0.216984 -0.188715 -0.117696 -0.013987 0.109709 0.240863 0.368983 0.486497 0.588855 0.674117 0.742306 0.794704 0.833231 0.859931 0.876616 0.884610 0.884610 0.876616 0.859931 0.833231 0.794704 0.742306 0.674117 0.588855 0.486497 0.368983 0.240863 0.109709 -0.013987 -0.117696 -0.188715 -0.216984 -0.198437 -0.137975 -0.050765 0.039515 0.106195 0.128221 0.099177 0.032503 -0.041297 \n-0.060689 0.006530 0.078660 0.123182 0.120763 0.070855 -0.010977 -0.100662 -0.174075 -0.213345 -0.209771 -0.163621 -0.081918 0.024558 0.144072 0.266005 0.382027 0.486497 0.576288 0.650303 0.708867 0.753134 0.784584 0.804634 0.814369 0.814369 0.804634 0.784584 0.753134 0.708867 0.650303 0.576288 0.486497 0.382027 0.266005 0.144072 0.024558 -0.081918 -0.163621 -0.209771 -0.213345 -0.174075 -0.100662 -0.010977 0.070855 0.120763 0.123182 0.078660 0.006530 -0.060689 \n-0.077335 -0.021508 0.051731 0.109721 0.128050 0.098819 0.030880 -0.055804 -0.137975 -0.195868 -0.217217 -0.198255 -0.142427 -0.057940 0.044884 0.155784 0.266005 0.368983 0.460450 0.538145 0.601338 0.650303 0.685836 0.708867 0.720166 0.720166 0.708867 0.685836 0.650303 0.601338 0.538145 0.460450 0.368983 0.266005 0.155784 0.044884 -0.057940 -0.142427 -0.198255 -0.217217 -0.195868 -0.137975 -0.055804 0.030880 0.098819 0.128050 0.109721 0.051731 -0.021508 -0.077335 \n-0.088417 -0.049021 0.019488 0.086815 0.125089 0.119357 0.070855 -0.006129 -0.090852 -0.162922 -0.207194 -0.215953 -0.188715 -0.130500 -0.049541 0.044884 0.144072 0.240863 0.330018 0.408164 0.473487 0.525305 0.563643 0.588855 0.601338 0.601338 0.588855 0.563643 0.525305 0.473487 0.408164 0.330018 0.240863 0.144072 0.044884 -0.049541 -0.130500 -0.188715 -0.215953 -0.207194 -0.162922 -0.090852 -0.006129 0.070855 0.119357 0.125089 0.086815 0.019488 -0.049021 -0.088417 \n-0.091043 -0.072453 -0.015479 0.054864 0.109721 0.128267 0.103850 0.043722 -0.035694 -0.115072 -0.177568 -0.212064 -0.214107 -0.185091 -0.130500 -0.057940 0.024558 0.109709 0.191626 0.266005 0.330018 0.382027 0.421243 0.447393 0.460450 0.460450 0.447393 0.421243 0.382027 0.330018 0.266005 0.191626 0.109709 0.024558 -0.057940 -0.130500 -0.185091 -0.214107 -0.212064 -0.177568 -0.115072 -0.035694 0.043722 0.103850 0.128267 0.109721 0.054864 -0.015479 -0.072453 -0.091043 \n-0.082901 -0.087679 -0.049021 0.016236 0.081434 0.122073 0.124266 0.087434 0.021972 -0.055804 -0.129008 -0.184190 -0.213345 -0.214107 -0.188715 -0.142427 -0.081918 -0.013987 0.055298 0.121030 0.179566 0.228415 0.266005 0.291434 0.304243 0.304243 0.291434 0.266005 0.228415 0.179566 0.121030 0.055298 -0.013987 -0.081918 -0.142427 -0.188715 -0.214107 -0.213345 -0.184190 -0.129008 -0.055804 0.021972 0.087434 0.124266 0.122073 0.081434 0.016236 -0.049021 -0.087679 -0.082901 \n-0.063112 -0.090789 -0.075785 -0.024467 0.042192 0.099177 0.127151 0.117830 0.074370 0.008154 -0.065879 -0.133527 -0.184190 -0.212064 -0.215953 -0.198255 -0.163621 -0.117696 -0.066137 -0.013987 0.034636 0.076606 0.109709 0.132485 0.144072 0.144072 0.132485 0.109709 0.076606 0.034636 -0.013987 -0.066137 -0.117696 -0.163621 -0.198255 -0.215953 -0.212064 -0.184190 -0.133527 -0.065879 0.008154 0.074370 0.117830 0.127151 0.099177 0.042192 -0.024467 -0.075785 -0.090789 -0.063112 \n-0.033097 -0.079242 -0.090131 -0.060689 -0.003044 0.061041 0.109721 0.128351 0.112540 0.067246 0.003440 -0.065879 -0.129008 -0.177568 -0.207194 -0.217217 -0.209771 -0.188715 -0.158657 -0.124207 -0.089498 -0.057940 -0.032150 -0.013987 -0.004623 -0.004623 -0.013987 -0.032150 -0.057940 -0.089498 -0.124207 -0.158657 -0.188715 -0.209771 -0.217217 -0.207194 -0.177568 -0.129008 -0.065879 0.003440 0.067246 0.112540 0.128351 0.109721 0.061041 -0.003044 -0.060689 -0.090131 -0.079242 -0.033097 \n0.002846 -0.053167 -0.087610 -0.084966 -0.046503 0.012990 0.072962 0.115049 0.128267 0.110542 0.067246 0.008154 -0.055804 -0.115072 -0.162922 -0.195868 -0.213345 -0.216984 -0.209771 -0.195296 -0.177174 -0.158657 -0.142427 -0.130500 -0.124207 -0.124207 -0.130500 -0.142427 -0.158657 -0.177174 -0.195296 -0.209771 -0.216984 -0.213345 -0.195868 -0.162922 -0.115072 -0.055804 0.008154 0.067246 0.110542 0.128267 0.115049 0.072962 0.012990 -0.046503 -0.084966 -0.087610 -0.053167 0.002846 \n0.037695 -0.016389 -0.066773 -0.090789 -0.078807 -0.035878 0.022744 0.078660 0.116645 0.128267 0.112540 0.074370 0.021972 -0.035694 -0.090852 -0.137975 -0.174075 -0.198437 -0.212064 -0.217041 -0.215953 -0.211428 -0.205816 -0.200994 -0.198255 -0.198255 -0.200994 -0.205816 -0.211428 -0.215953 -0.217041 -0.212064 -0.198437 -0.174075 -0.137975 -0.090852 -0.035694 0.021972 0.074370 0.112540 0.128267 0.116645 0.078660 0.022744 -0.035878 -0.078807 -0.090789 -0.066773 -0.016389 0.037695 \n0.062902 0.023386 -0.030748 -0.075005 -0.091320 -0.074157 -0.030262 0.026000 0.078660 0.115049 0.128351 0.117830 0.087434 0.043722 -0.006129 -0.055804 -0.100662 -0.137975 -0.166747 -0.187312 -0.200857 -0.208985 -0.213345 -0.215375 -0.216117 -0.216117 -0.215375 -0.213345 -0.208985 -0.200857 -0.187312 -0.166747 -0.137975 -0.100662 -0.055804 -0.006129 0.043722 0.087434 0.117830 0.128351 0.115049 0.078660 0.026000 -0.030262 -0.074157 -0.091320 -0.075005 -0.030748 0.023386 0.062902 \n0.070762 0.055796 0.012199 -0.040028 -0.079242 -0.091093 -0.072453 -0.030262 0.022744 0.072962 0.109721 0.127151 0.124266 0.103850 0.070855 0.030880 -0.010977 -0.050765 -0.085900 -0.115072 -0.137975 -0.154968 -0.166747 -0.174075 -0.177568 -0.177568 -0.174075 -0.166747 -0.154968 -0.137975 -0.115072 -0.085900 -0.050765 -0.010977 0.030880 0.070855 0.103850 0.124266 0.127151 0.109721 0.072962 0.022744 -0.030262 -0.072453 -0.091093 -0.079242 -0.040028 0.012199 0.055796 0.070762 \n0.057478 0.070659 0.049923 0.005210 -0.044529 -0.080528 -0.091093 -0.074157 -0.035878 0.012990 0.061041 0.099177 0.122073 0.128267 0.119357 0.098819 0.070855 0.039515 0.008154 -0.020780 -0.045731 -0.065879 -0.080922 -0.090852 -0.095774 -0.095774 -0.090852 -0.080922 -0.065879 -0.045731 -0.020780 0.008154 0.039515 0.070855 0.098819 0.119357 0.128267 0.122073 0.099177 0.061041 0.012990 -0.035878 -0.074157 -0.091093 -0.080528 -0.044529 0.005210 0.049923 0.070659 0.057478 \n0.025861 0.061923 0.069828 0.046671 0.002846 -0.044529 -0.079242 -0.091320 -0.078807 -0.046503 -0.003044 0.042192 0.081434 0.109721 0.125089 0.128050 0.120763 0.106195 0.087434 0.067246 0.047852 0.030880 0.017423 0.008154 0.003440 0.003440 0.008154 0.017423 0.030880 0.047852 0.067246 0.087434 0.106195 0.120763 0.128050 0.125089 0.109721 0.081434 0.042192 -0.003044 -0.046503 -0.078807 -0.091320 -0.079242 -0.044529 0.002846 0.046671 0.069828 0.061923 0.025861 \n-0.013876 0.031333 0.063841 0.069422 0.046671 0.005210 -0.040028 -0.075005 -0.090789 -0.084966 -0.060689 -0.024467 0.016236 0.054864 0.086815 0.109721 0.123182 0.128221 0.126693 0.120763 0.112540 0.103850 0.096136 0.090442 0.087434 0.087434 0.090442 0.096136 0.103850 0.112540 0.120763 0.126693 0.128221 0.123182 0.109721 0.086815 0.054864 0.016236 -0.024467 -0.060689 -0.084966 -0.090789 -0.075005 -0.040028 0.005210 0.046671 0.069422 0.063841 0.031333 -0.013876 \n-0.046557 -0.010220 0.033117 0.063841 0.069828 0.049923 0.012199 -0.030748 -0.066773 -0.087610 -0.090131 -0.075785 -0.049021 -0.015479 0.019488 0.051731 0.078660 0.099177 0.113362 0.122073 0.126573 0.128221 0.128267 0.127715 0.127263 0.127263 0.127715 0.128267 0.128221 0.126573 0.122073 0.113362 0.099177 0.078660 0.051731 0.019488 -0.015479 -0.049021 -0.075785 -0.090131 -0.087610 -0.066773 -0.030748 0.012199 0.049923 0.069828 0.063841 0.033117 -0.010220 -0.046557 \n-0.057869 -0.045470 -0.010220 0.031333 0.061923 0.070659 0.055796 0.023386 -0.016389 -0.053167 -0.079242 -0.090789 -0.087679 -0.072453 -0.049021 -0.021508 0.006530 0.032503 0.054864 0.072962 0.086815 0.096840 0.103631 0.107773 0.109721 0.109721 0.107773 0.103631 0.096840 0.086815 0.072962 0.054864 0.032503 0.006530 -0.021508 -0.049021 -0.072453 -0.087679 -0.090789 -0.079242 -0.053167 -0.016389 0.023386 0.055796 0.070659 0.061923 0.031333 -0.010220 -0.045470 -0.057869 \n-0.041722 -0.057869 -0.046557 -0.013876 0.025861 0.057478 0.070762 0.062902 0.037695 0.002846 -0.033097 -0.063112 -0.082901 -0.091043 -0.088417 -0.077335 -0.060689 -0.041297 -0.021508 -0.003044 0.012990 0.026000 0.035745 0.042192 0.045392 0.045392 0.042192 0.035745 0.026000 0.012990 -0.003044 -0.021508 -0.041297 -0.060689 -0.077335 -0.088417 -0.091043 -0.082901 -0.063112 -0.033097 0.002846 0.037695 0.062902 0.070762 0.057478 0.025861 -0.013876 -0.046557 -0.057869 -0.041722 \n", "MIMEtype" : "application/x-vgfc"}',
      data:[{
        x: [1,2,3,4],
        y: [10,15,13,17],
        type:"scatter"
      }],
      layout:{
        title: "My graph"
      },
      datasetList : [],
      dropdownVModel: "2DGitterplot",
      xArray: [],
      yArray: [],
      minColor: "",
      maxColor: "",
      imageConfig: {
        format: 'svg',
        filename: 'graph'
      }
    }
  },
  mounted() {
    var parseTest = new Parser.Parse(this.plotData);
    var testJson = parseTest.parseFileToJson();
    this.datasetList = parseTest.parseValues(testJson);
    this.minColor = parseTest.getMinColor();
    this.maxColor = parseTest.getMaxColor();

    for (var i = 0; i < this.datasetList[0].getWidth(); i++) {
      this.xArray.push(this.datasetList[0].getXMin() * 1 + (i * ((this.datasetList[0].getXMax() - this.datasetList[0].getXMin())/this.datasetList[0].getWidth())));
    }

    for (i = 0; i < this.datasetList[0].getHeight(); i++) {
      this.yArray.push(this.datasetList[0].getYMin() * 1 + (i * ((this.datasetList[0].getYMax() - this.datasetList[0].getYMin())/this.datasetList[0].getHeight())));
    }

    this.create2dGitterplot();

    this.layout = {

      title: this.datasetList[0].getLabel(),
      scene: {
        camera: {
          eye: { x: -1.25, y: -1.25, z: 1.25 }
        },
        xaxis: {
          range: [this.datasetList[0].getXMin(), this.datasetList[0].getXMax()],

        },
        yaxis: {
        range: [this.datasetList[0].getYMin(), this.datasetList[0].getYMax()],
      }
      },
      yaxis: {
        scaleanchor: "x",
      }
    }
  },
  methods: {
    onChange(event) {
      //console.log(event.target.value);
      if (event.target.value === "2DGitterplot") {
        this.create2dGitterplot();
      } else if (event.target.value === "3DKaestchen") {
        this.create3dKaestchen();
      } else {
        this.create3dInterpoliert();
      }
    },
    create2dGitterplot: function() {
      this.data = [
        {
          z: this.datasetList[0].getData(),
          x: this.xArray,
          y: this.yArray,
          type: 'heatmap',
          hoverongaps: false,
          xgap :	.5,
          ygap :	.5,
          colorscale: [[0, this.minColor[0]], [1, this.maxColor[0]]]
        }
      ];
    },
    create3dKaestchen: function() {
      var xScatterArray = new Array();
      var yScatterArray = new Array();

      for (var j = 0; j < this.datasetList[0].getData()[0].length; j++) {
        Array.prototype.push.apply(xScatterArray, this.xArray);

      }

      for (j = 0; j < this.datasetList[0].getData().length; j++) {
        Array.prototype.push.apply(yScatterArray, this.yArray);
      }

      var zScatterArray = new Array();
      for(var i = 0; i < this.datasetList[0].getData().length; i++) {
        zScatterArray = zScatterArray.concat(this.datasetList[0].getData()[i]);
      }
      yScatterArray.sort(function(a, b){return a - b});

      this.data = [{
        x: xScatterArray,
        y: yScatterArray,
        z: zScatterArray,
        mode: 'markers',
        marker: {
          size: 5,
          symbol: 'square',
          line: {
            color: 'rgb(50, 50, 50)',
            width: 0.5
          },
          colorscale: [[0, this.minColor[0]], [1, this.maxColor[0]]],
          color: zScatterArray,
          showscale: true,
          opacity: 0.8
        },
        type: 'scatter3d',
      }];
    },
    create3dInterpoliert: function() {
      this.data = [
        {
          type: 'surface',
          x: this.xArray,
          y: this.yArray,
          z: this.datasetList[0].getData(),
          colorscale: [[0, this.minColor[0]], [1, this.maxColor[0]]]
        }, {
          type: 'surface',
          x: this.xArray,
          y: this.yArray,
          z: this.datasetList[0].getData(),
          hidesurface: true,
          contours: {
            x: { show: true },
            y: { show: true },
            z: { show: true }
          },
          showscale: false
        }];
    },
  }
}
</script>

<!-- Add "scoped" attribute to limit CSS to this component only -->
<style scoped>
  .gridplot-component {
    border-radius: calc(0.25rem - 1px);
  }
</style>

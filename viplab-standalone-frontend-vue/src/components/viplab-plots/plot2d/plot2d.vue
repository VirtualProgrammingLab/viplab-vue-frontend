<template>
  <div class="a2dplot-component border">
    <div class="plot-div" >
      <Plotly ref="plot" :data="data" :layout="layout" :display-mode-bar="true" :to-image-button-options="imageConfig"></Plotly>
    </div>
    <div>
      <div class="file-controller text-center center-controller">
        <div class="fixed-row-70 display-flex-center">
          <span> {{ currentIndex }}/{{ datasetList.length }} </span>
        </div>
        <b-button-group  v-if="datasetList.length > 1">
          <b-button btn-variant="white" @click="resetFileIndex">
            <font-awesome-icon icon="fast-backward" />
          </b-button>
          <b-button btn-variant="white" @click="decreaseFileIndex">
            <font-awesome-icon icon="backward" />
          </b-button>
          <b-button btn-variant="white" @click="setEnableAutoPlay">
            <font-awesome-icon v-if="enableAutoPlay" icon="pause" />
            <font-awesome-icon v-else icon="play" />
          </b-button>
          <b-button btn-variant="white" @click="increaseFileIndex">
            <font-awesome-icon icon="forward" />
          </b-button>
          <b-button btn-variant="white" @click="setMaxFileIndex">
            <font-awesome-icon icon="fast-forward" />
          </b-button>
        </b-button-group>
      </div>
    </div>
  </div>
</template>

<script>
import * as LinePlotParser from "./LinePlotParser.js";

import { Plotly } from "@rleys/vue-plotly-basic";

export default {
  name: "Plot2d",
  components: {
    Plotly,
  },
  props: {
    plotData: String,
  },
  data() {
    return {
      //example: '{"identifier" : "vipplot.vgf", "value" : "# color 0 200 150\n# symbol none\n# linestyle solid\n# legend explicit euler\n 0.000000 0.000000 0.020000 0.000000\n 0.020000 0.000000 0.040000 0.000279\n 0.040000 0.000279 0.060000 0.000255\n 0.060000 0.000255 0.080000 -0.000630\n 0.080000 -0.000630 0.100000 -0.002227\n 0.100000 -0.002227 0.120000 -0.003534\n 0.120000 -0.003534 0.140000 -0.003324\n 0.140000 -0.003324 0.160000 -0.001153\n 0.160000 -0.001153 0.180000 0.002026\n 0.180000 0.002026 0.200000 0.004216\n 0.200000 0.004216 0.220000 0.003634\n 0.220000 0.003634 0.240000 0.000065\n 0.240000 0.000065 0.260000 -0.004662\n 0.260000 -0.004662 0.280000 -0.007579\n 0.280000 -0.007579 0.300000 -0.006442\n 0.300000 -0.006442 0.320000 -0.001379\n 0.320000 -0.001379 0.340000 0.004847\n 0.340000 0.004847 0.360000 0.008327\n 0.360000 0.008327 0.380000 0.006456\n 0.380000 0.006456 0.400000 -0.000184\n 0.400000 -0.000184 0.420000 -0.007845\n 0.420000 -0.007845 0.440000 -0.011715\n 0.440000 -0.011715 0.460000 -0.008937\n 0.460000 -0.008937 0.480000 -0.000651\n 0.480000 -0.000651 0.500000 0.008366\n 0.500000 0.008366 0.520000 0.012447\n 0.520000 0.012447 0.540000 0.008593\n 0.540000 0.008593 0.560000 -0.001392\n 0.560000 -0.001392 0.580000 -0.011669\n 0.580000 -0.011669 0.600000 -0.015776\n 0.600000 -0.015776 0.620000 -0.010686\n 0.620000 -0.010686 0.640000 0.001034\n 0.640000 0.001034 0.660000 0.012462\n 0.660000 0.012462 0.680000 0.016407\n 0.680000 0.016407 0.700000 0.009929\n 0.700000 0.009929 0.720000 -0.003547\n 0.720000 -0.003547 0.740000 -0.016003\n 0.740000 -0.016003 0.760000 -0.019595\n 0.760000 -0.019595 0.780000 -0.011587\n 0.780000 -0.011587 0.800000 0.003651\n 0.800000 0.003651 0.820000 0.016998\n 0.820000 0.016998 0.840000 0.020043\n 0.840000 0.020043 0.860000 0.010374\n 0.860000 0.010374 0.880000 -0.006613\n 0.880000 -0.006613 0.900000 -0.020704\n 0.900000 -0.020704 0.920000 -0.023007\n 0.920000 -0.023007 0.940000 -0.011557\n 0.940000 -0.011557 0.960000 0.007151\n 0.960000 0.007151 0.980000 0.021825\n 0.980000 0.021825 1.000000 0.023194\n# color 200 150 0\n# symbol none\n# linestyle solid\n# legend heun\n 0.000000 0.000000 0.020000 0.000139\n 0.020000 0.000139 0.040000 0.000267\n 0.040000 0.000267 0.060000 -0.000187\n 0.060000 -0.000187 0.080000 -0.001428\n 0.080000 -0.001428 0.100000 -0.002880\n 0.100000 -0.002880 0.120000 -0.003429\n 0.120000 -0.003429 0.140000 -0.002238\n 0.140000 -0.002238 0.160000 0.000437\n 0.160000 0.000437 0.180000 0.003121\n 0.180000 0.003121 0.200000 0.003925\n 0.200000 0.003925 0.220000 0.001849\n 0.220000 0.001849 0.240000 -0.002298\n 0.240000 -0.002298 0.260000 -0.006120\n 0.260000 -0.006120 0.280000 -0.007010\n 0.280000 -0.007010 0.300000 -0.003910\n 0.300000 -0.003910 0.320000 0.001734\n 0.320000 0.001734 0.340000 0.006587\n 0.340000 0.006587 0.360000 0.007392\n 0.360000 0.007392 0.380000 0.003136\n 0.380000 0.003136 0.400000 -0.004015\n 0.400000 -0.004015 0.420000 -0.009780\n 0.420000 -0.009780 0.440000 -0.010326\n 0.440000 -0.010326 0.460000 -0.004794\n 0.460000 -0.004794 0.480000 0.003858\n 0.480000 0.003858 0.500000 0.010406\n 0.500000 0.010406 0.520000 0.010520\n 0.520000 0.010520 0.540000 0.003600\n 0.540000 0.003600 0.560000 -0.006530\n 0.560000 -0.006530 0.580000 -0.013722\n 0.580000 -0.013722 0.600000 -0.013231\n 0.600000 -0.013231 0.620000 -0.004826\n 0.620000 -0.004826 0.640000 0.006748\n 0.640000 0.006748 0.660000 0.014435\n 0.660000 0.014435 0.680000 0.013168\n 0.680000 0.013168 0.700000 0.003191\n 0.700000 0.003191 0.720000 -0.009775\n 0.720000 -0.009775 0.740000 -0.017799\n 0.740000 -0.017799 0.760000 -0.015591\n 0.760000 -0.015591 0.780000 -0.003968\n 0.780000 -0.003968 0.800000 0.010325\n 0.800000 0.010325 0.820000 0.018521\n 0.820000 0.018521 0.840000 0.015208\n 0.840000 0.015208 0.860000 0.001880\n 0.860000 0.001880 0.880000 -0.013659\n 0.880000 -0.013659 0.900000 -0.021856\n 0.900000 -0.021856 0.920000 -0.017282\n 0.920000 -0.017282 0.940000 -0.002203\n 0.940000 -0.002203 0.960000 0.014488\n 0.960000 0.014488 0.980000 0.022509\n 0.980000 0.022509 1.000000 0.016524\n# color 200 0 150\n# symbol none\n# linestyle solid\n# legend Runge-Kutta 4\n 0.000000 0.000000 0.020000 0.000169\n 0.020000 0.000169 0.040000 0.000357\n 0.040000 0.000357 0.060000 -0.000072\n 0.060000 -0.000072 0.080000 -0.001365\n 0.080000 -0.001365 0.100000 -0.002925\n 0.100000 -0.002925 0.120000 -0.003559\n 0.120000 -0.003559 0.140000 -0.002350\n 0.140000 -0.002350 0.160000 0.000462\n 0.160000 0.000462 0.180000 0.003327\n 0.180000 0.003327 0.200000 0.004232\n 0.200000 0.004232 0.220000 0.002086\n 0.220000 0.002086 0.240000 -0.002286\n 0.240000 -0.002286 0.260000 -0.006357\n 0.260000 -0.006357 0.280000 -0.007353\n 0.280000 -0.007353 0.300000 -0.004122\n 0.300000 -0.004122 0.320000 0.001835\n 0.320000 0.001835 0.340000 0.006999\n 0.340000 0.006999 0.360000 0.007905\n 0.360000 0.007905 0.380000 0.003451\n 0.380000 0.003451 0.400000 -0.004102\n 0.400000 -0.004102 0.420000 -0.010233\n 0.420000 -0.010233 0.440000 -0.010866\n 0.440000 -0.010866 0.460000 -0.005060\n 0.460000 -0.005060 0.480000 0.004082\n 0.480000 0.004082 0.500000 0.011044\n 0.500000 0.011044 0.520000 0.011220\n 0.520000 0.011220 0.540000 0.003945\n 0.540000 0.003945 0.560000 -0.006765\n 0.560000 -0.006765 0.580000 -0.014408\n 0.580000 -0.014408 0.600000 -0.013945\n 0.600000 -0.013945 0.620000 -0.005098\n 0.620000 -0.005098 0.640000 0.007141\n 0.640000 0.007141 0.660000 0.015310\n 0.660000 0.015310 0.680000 0.014028\n 0.680000 0.014028 0.700000 0.003515\n 0.700000 0.003515 0.720000 -0.010199\n 0.720000 -0.010199 0.740000 -0.018726\n 0.740000 -0.018726 0.760000 -0.016447\n 0.760000 -0.016447 0.780000 -0.004193\n 0.780000 -0.004193 0.800000 0.010927\n 0.800000 0.010927 0.820000 0.019638\n 0.820000 0.019638 0.840000 0.016191\n 0.840000 0.016191 0.860000 0.002131\n 0.860000 0.002131 0.880000 -0.014309\n 0.880000 -0.014309 0.900000 -0.023023\n 0.900000 -0.023023 0.920000 -0.018242\n 0.920000 -0.018242 0.940000 -0.002329\n 0.940000 -0.002329 0.960000 0.015332\n 0.960000 0.015332 0.980000 0.023863\n 0.980000 0.023863 1.000000 0.017589\n# color 0 0 255\n# symbol none\n# linestyle solid\n# legend exact\n 0.000000 0.000000 0.020000 0.000169\n 0.020000 0.000169 0.040000 0.000356\n 0.040000 0.000356 0.060000 -0.000073\n 0.060000 -0.000073 0.080000 -0.001366\n 0.080000 -0.001366 0.100000 -0.002926\n 0.100000 -0.002926 0.120000 -0.003559\n 0.120000 -0.003559 0.140000 -0.002350\n 0.140000 -0.002350 0.160000 0.000462\n 0.160000 0.000462 0.180000 0.003327\n 0.180000 0.003327 0.200000 0.004231\n 0.200000 0.004231 0.220000 0.002085\n 0.220000 0.002085 0.240000 -0.002286\n 0.240000 -0.002286 0.260000 -0.006356\n 0.260000 -0.006356 0.280000 -0.007352\n 0.280000 -0.007352 0.300000 -0.004122\n 0.300000 -0.004122 0.320000 0.001835\n 0.320000 0.001835 0.340000 0.006998\n 0.340000 0.006998 0.360000 0.007904\n 0.360000 0.007904 0.380000 0.003450\n 0.380000 0.003450 0.400000 -0.004103\n 0.400000 -0.004103 0.420000 -0.010232\n 0.420000 -0.010232 0.440000 -0.010865\n 0.440000 -0.010865 0.460000 -0.005060\n 0.460000 -0.005060 0.480000 0.004082\n 0.480000 0.004082 0.500000 0.011042\n 0.500000 0.011042 0.520000 0.011218\n 0.520000 0.011218 0.540000 0.003944\n 0.540000 0.003944 0.560000 -0.006764\n 0.560000 -0.006764 0.580000 -0.014407\n 0.580000 -0.014407 0.600000 -0.013944\n 0.600000 -0.013944 0.620000 -0.005097\n 0.620000 -0.005097 0.640000 0.007140\n 0.640000 0.007140 0.660000 0.015308\n 0.660000 0.015308 0.680000 0.014025\n 0.680000 0.014025 0.700000 0.003514\n 0.700000 0.003514 0.720000 -0.010198\n 0.720000 -0.010198 0.740000 -0.018724\n 0.740000 -0.018724 0.760000 -0.016445\n 0.760000 -0.016445 0.780000 -0.004192\n 0.780000 -0.004192 0.800000 0.010925\n 0.800000 0.010925 0.820000 0.019635\n 0.820000 0.019635 0.840000 0.016188\n 0.840000 0.016188 0.860000 0.002130\n 0.860000 0.002130 0.880000 -0.014307\n 0.880000 -0.014307 0.900000 -0.023020\n 0.900000 -0.023020 0.920000 -0.018240\n 0.920000 -0.018240 0.940000 -0.002328\n 0.940000 -0.002328 0.960000 0.015330\n 0.960000 0.015330 0.980000 0.023859\n 0.980000 0.023859 1.000000 0.017586\n# newframe\n# title absolute error\n# x-label x\n# y-label error\n# scale \n# color 0 200 150\n# symbol none\n# linestyle solid\n# legend explicit euler\n 0.000000 0.000000 0.020000 0.000169\n 0.020000 0.000169 0.040000 0.000078\n 0.040000 0.000078 0.060000 0.000328\n 0.060000 0.000328 0.080000 0.000736\n 0.080000 0.000736 0.100000 0.000699\n 0.100000 0.000699 0.120000 0.000025\n 0.120000 0.000025 0.140000 0.000974\n 0.140000 0.000974 0.160000 0.001614\n 0.160000 0.001614 0.180000 0.001301\n 0.180000 0.001301 0.200000 0.000015\n 0.200000 0.000015 0.220000 0.001549\n 0.220000 0.001549 0.240000 0.002351\n 0.240000 0.002351 0.260000 0.001695\n 0.260000 0.001695 0.280000 0.000226\n 0.280000 0.000226 0.300000 0.002320\n 0.300000 0.002320 0.320000 0.003214\n 0.320000 0.003214 0.340000 0.002150\n 0.340000 0.002150 0.360000 0.000423\n 0.360000 0.000423 0.380000 0.003007\n 0.380000 0.003007 0.400000 0.003918\n 0.400000 0.003918 0.420000 0.002387\n 0.420000 0.002387 0.440000 0.000850\n 0.440000 0.000850 0.460000 0.003877\n 0.460000 0.003877 0.480000 0.004732\n 0.480000 0.004732 0.500000 0.002676\n 0.500000 0.002676 0.520000 0.001229\n 0.520000 0.001229 0.540000 0.004648\n 0.540000 0.004648 0.560000 0.005372\n 0.560000 0.005372 0.580000 0.002738\n 0.580000 0.002738 0.600000 0.001833\n 0.600000 0.001833 0.620000 0.005589\n 0.620000 0.005589 0.640000 0.006106\n 0.640000 0.006106 0.660000 0.002846\n 0.660000 0.002846 0.680000 0.002382\n 0.680000 0.002382 0.700000 0.006415\n 0.700000 0.006415 0.720000 0.006651\n 0.720000 0.006651 0.740000 0.002721\n 0.740000 0.002721 0.760000 0.003150\n 0.760000 0.003150 0.780000 0.007394\n 0.780000 0.007394 0.800000 0.007274\n 0.800000 0.007274 0.820000 0.002636\n 0.820000 0.002636 0.840000 0.003855\n 0.840000 0.003855 0.860000 0.008243\n 0.860000 0.008243 0.880000 0.007694\n 0.880000 0.007694 0.900000 0.002316\n 0.900000 0.002316 0.920000 0.004768\n 0.920000 0.004768 0.940000 0.009229\n 0.940000 0.009229 0.960000 0.008180\n 0.960000 0.008180 0.980000 0.002034\n 0.980000 0.002034 1.000000 0.005608\n# color 200 150 0\n# symbol none\n# linestyle solid\n# legend heun\n 0.000000 0.000000 0.020000 0.000030\n 0.020000 0.000030 0.040000 0.000089\n 0.040000 0.000089 0.060000 0.000114\n 0.060000 0.000114 0.080000 0.000063\n 0.080000 0.000063 0.100000 0.000045\n 0.100000 0.000045 0.120000 0.000130\n 0.120000 0.000130 0.140000 0.000111\n 0.140000 0.000111 0.160000 0.000025\n 0.160000 0.000025 0.180000 0.000206\n 0.180000 0.000206 0.200000 0.000306\n 0.200000 0.000306 0.220000 0.000236\n 0.220000 0.000236 0.240000 0.000012\n 0.240000 0.000012 0.260000 0.000236\n 0.260000 0.000236 0.280000 0.000342\n 0.280000 0.000342 0.300000 0.000212\n 0.300000 0.000212 0.320000 0.000101\n 0.320000 0.000101 0.340000 0.000411\n 0.340000 0.000411 0.360000 0.000512\n 0.360000 0.000512 0.380000 0.000314\n 0.380000 0.000314 0.400000 0.000088\n 0.400000 0.000088 0.420000 0.000452\n 0.420000 0.000452 0.440000 0.000539\n 0.440000 0.000539 0.460000 0.000266\n 0.460000 0.000266 0.480000 0.000224\n 0.480000 0.000224 0.500000 0.000636\n 0.500000 0.000636 0.520000 0.000698\n 0.520000 0.000698 0.540000 0.000344\n 0.540000 0.000344 0.560000 0.000234\n 0.560000 0.000234 0.580000 0.000684\n 0.580000 0.000684 0.600000 0.000712\n 0.600000 0.000712 0.620000 0.000271\n 0.620000 0.000271 0.640000 0.000392\n 0.640000 0.000392 0.660000 0.000873\n 0.660000 0.000873 0.680000 0.000857\n 0.680000 0.000857 0.700000 0.000323\n 0.700000 0.000323 0.720000 0.000423\n 0.720000 0.000423 0.740000 0.000925\n 0.740000 0.000925 0.760000 0.000854\n 0.760000 0.000854 0.780000 0.000224\n 0.780000 0.000224 0.800000 0.000600\n 0.800000 0.000600 0.820000 0.001114\n 0.820000 0.001114 0.840000 0.000980\n 0.840000 0.000980 0.860000 0.000250\n 0.860000 0.000250 0.880000 0.000649\n 0.880000 0.000649 0.900000 0.001164\n 0.900000 0.001164 0.920000 0.000958\n 0.920000 0.000958 0.940000 0.000125\n 0.940000 0.000125 0.960000 0.000843\n 0.960000 0.000843 0.980000 0.001350\n 0.980000 0.001350 1.000000 0.001062\n# color 200 0 150\n# symbol none\n# linestyle solid\n# legend Runge-Kutta 4\n 0.000000 0.000000 0.020000 0.000000\n 0.020000 0.000000 0.040000 0.000000\n 0.040000 0.000000 0.060000 0.000001\n 0.060000 0.000001 0.080000 0.000001\n 0.080000 0.000001 0.100000 0.000000\n 0.100000 0.000000 0.120000 0.000000\n 0.120000 0.000000 0.140000 0.000000\n 0.140000 0.000000 0.160000 0.000000\n 0.160000 0.000000 0.180000 0.000001\n 0.180000 0.000001 0.200000 0.000001\n 0.200000 0.000001 0.220000 0.000001\n 0.220000 0.000001 0.240000 0.000000\n 0.240000 0.000000 0.260000 0.000000\n 0.260000 0.000000 0.280000 0.000001\n 0.280000 0.000001 0.300000 0.000001\n 0.300000 0.000001 0.320000 0.000000\n 0.320000 0.000000 0.340000 0.000001\n 0.340000 0.000001 0.360000 0.000002\n 0.360000 0.000002 0.380000 0.000001\n 0.380000 0.000001 0.400000 0.000000\n 0.400000 0.000000 0.420000 0.000001\n 0.420000 0.000001 0.440000 0.000001\n 0.440000 0.000001 0.460000 0.000001\n 0.460000 0.000001 0.480000 0.000001\n 0.480000 0.000001 0.500000 0.000002\n 0.500000 0.000002 0.520000 0.000002\n 0.520000 0.000002 0.540000 0.000001\n 0.540000 0.000001 0.560000 0.000000\n 0.560000 0.000000 0.580000 0.000002\n 0.580000 0.000002 0.600000 0.000002\n 0.600000 0.000002 0.620000 0.000001\n 0.620000 0.000001 0.640000 0.000001\n 0.640000 0.000001 0.660000 0.000002\n 0.660000 0.000002 0.680000 0.000003\n 0.680000 0.000003 0.700000 0.000001\n 0.700000 0.000001 0.720000 0.000001\n 0.720000 0.000001 0.740000 0.000002\n 0.740000 0.000002 0.760000 0.000002\n 0.760000 0.000002 0.780000 0.000001\n 0.780000 0.000001 0.800000 0.000002\n 0.800000 0.000002 0.820000 0.000003\n 0.820000 0.000003 0.840000 0.000003\n 0.840000 0.000003 0.860000 0.000001\n 0.860000 0.000001 0.880000 0.000001\n 0.880000 0.000001 0.900000 0.000003\n 0.900000 0.000003 0.920000 0.000003\n 0.920000 0.000003 0.940000 0.000000\n 0.940000 0.000000 0.960000 0.000002\n 0.960000 0.000002 0.980000 0.000004\n 0.980000 0.000004 1.000000 0.000003\n# newframe\n# title absolute error\n# x-label x\n# y-label error\n# scale \n# color 191 34 34\n# symbol none\n# linestyle solid\n# legend explicit euler\n 0.000000 0.000000 0.020000 0.000169\n 0.020000 0.000169 0.040000 0.000078\n 0.040000 0.000078 0.060000 0.000328\n 0.060000 0.000328 0.080000 0.000736\n 0.080000 0.000736 0.100000 0.000699\n 0.100000 0.000699 0.120000 0.000025\n 0.120000 0.000025 0.140000 0.000974\n 0.140000 0.000974 0.160000 0.001614\n 0.160000 0.001614 0.180000 0.001301\n 0.180000 0.001301 0.200000 0.000015\n 0.200000 0.000015 0.220000 0.001549\n 0.220000 0.001549 0.240000 0.002351\n 0.240000 0.002351 0.260000 0.001695\n 0.260000 0.001695 0.280000 0.000226\n 0.280000 0.000226 0.300000 0.002320\n 0.300000 0.002320 0.320000 0.003214\n 0.320000 0.003214 0.340000 0.002150\n 0.340000 0.002150 0.360000 0.000423\n 0.360000 0.000423 0.380000 0.003007\n 0.380000 0.003007 0.400000 0.003918\n 0.400000 0.003918 0.420000 0.002387\n 0.420000 0.002387 0.440000 0.000850\n 0.440000 0.000850 0.460000 0.003877\n 0.460000 0.003877 0.480000 0.004732\n 0.480000 0.004732 0.500000 0.002676\n 0.500000 0.002676 0.520000 0.001229\n 0.520000 0.001229 0.540000 0.004648\n 0.540000 0.004648 0.560000 0.005372\n 0.560000 0.005372 0.580000 0.002738\n 0.580000 0.002738 0.600000 0.001833\n 0.600000 0.001833 0.620000 0.005589\n 0.620000 0.005589 0.640000 0.006106\n 0.640000 0.006106 0.660000 0.002846\n 0.660000 0.002846 0.680000 0.002382\n 0.680000 0.002382 0.700000 0.006415\n 0.700000 0.006415 0.720000 0.006651\n 0.720000 0.006651 0.740000 0.002721\n 0.740000 0.002721 0.760000 0.003150\n 0.760000 0.003150 0.780000 0.007394\n 0.780000 0.007394 0.800000 0.007274\n 0.800000 0.007274 0.820000 0.002636\n 0.820000 0.002636 0.840000 0.003855\n 0.840000 0.003855 0.860000 0.008243\n 0.860000 0.008243 0.880000 0.007694\n 0.880000 0.007694 0.900000 0.002316\n 0.900000 0.002316 0.920000 0.004768\n 0.920000 0.004768 0.940000 0.009229\n 0.940000 0.009229 0.960000 0.008180\n 0.960000 0.008180 0.980000 0.002034\n 0.980000 0.002034 1.000000 0.005608\n", "MIMEtype" : "application/x-vgf"}',
      //  example2: '{"identifier" : "vipplot.vgf","value" : "# color 255 0 0\n# symbol none\n0.000000 0.000000 0.150000 0.000000\n0.150000 0.000000 0.300000 0.000000\n0.300000 0.000000 0.450000 0.000013\n0.450000 0.000013 0.600000 0.000054\n0.600000 0.000054 0.750000 0.000135\n0.750000 0.000135 0.900000 0.000270\n0.900000 0.000270 1.050000 0.000471\n1.050000 0.000471 1.200000 0.000751\n1.200000 0.000751 1.350000 0.001124\n1.350000 0.001124 1.500000 0.001600\n1.500000 0.001600 1.650000 0.002190\n1.650000 0.002190 1.800000 0.002906\n1.800000 0.002906 1.950000 0.003758\n1.950000 0.003758 2.100000 0.004754\n2.100000 0.004754 2.250000 0.005902\n2.250000 0.005902 2.400000 0.007212\n2.400000 0.007212 2.550000 0.008688\n2.550000 0.008688 2.700000 0.010337\n2.700000 0.010337 2.850000 0.012164\n2.850000 0.012164 3.000000 0.014171\n3.000000 0.014171 3.150000 0.016362\n3.150000 0.016362 3.300000 0.018738\n3.300000 0.018738 3.450000 0.021300\n3.450000 0.021300 3.600000 0.024046\n3.600000 0.024046 3.750000 0.026974\n3.750000 0.026974 3.900000 0.030083\n3.900000 0.030083 4.050000 0.033367\n4.050000 0.033367 4.200000 0.036821\n4.200000 0.036821 4.350000 0.040440\n4.350000 0.040440 4.500000 0.044216\n4.500000 0.044216 4.650000 0.048140\n4.650000 0.048140 4.800000 0.052205\n4.800000 0.052205 4.950000 0.056399\n4.950000 0.056399 5.100000 0.060712\n5.100000 0.060712 5.250000 0.065132\n5.250000 0.065132 5.400000 0.069628\n5.400000 0.069628 5.550000 0.074162\n5.550000 0.074162 5.700000 0.078691\n5.700000 0.078691 5.850000 0.083177\n5.850000 0.083177 6.000000 0.087577\n6.000000 0.087577 6.150000 0.091851\n6.150000 0.091851 6.300000 0.095960\n6.300000 0.095960 6.450000 0.099864\n6.450000 0.099864 6.600000 0.103526\n6.600000 0.103526 6.750000 0.106908\n6.750000 0.106908 6.900000 0.109975\n6.900000 0.109975 7.050000 0.112693\n7.050000 0.112693 7.200000 0.115030\n7.200000 0.115030 7.350000 0.116956\n7.350000 0.116956 7.500000 0.118444\n7.500000 0.118444 7.650000 0.119469\n7.650000 0.119469 7.800000 0.120008\n7.800000 0.120008 7.950000 0.120042\n7.950000 0.120042 8.100000 0.119554\n8.100000 0.119554 8.250000 0.118530\n8.250000 0.118530 8.400000 0.116960\n8.400000 0.116960 8.550000 0.114836\n8.550000 0.114836 8.700000 0.112155\n8.700000 0.112155 8.850000 0.108914\n8.850000 0.108914 9.000000 0.105118\n9.000000 0.105118 9.150000 0.100772\n9.150000 0.100772 9.300000 0.095885\n9.300000 0.095885 9.450000 0.090471\n9.450000 0.090471 9.600000 0.084543\n9.600000 0.084543 9.750000 0.078123\n9.750000 0.078123 9.900000 0.071231\n9.900000 0.071231 10.050000 0.063893\n10.050000 0.063893 10.200000 0.056137\n10.200000 0.056137 10.350000 0.047997\n10.350000 0.047997 10.500000 0.039520\n10.500000 0.039520 10.650000 0.030756\n10.650000 0.030756 10.800000 0.021754\n10.800000 0.021754 10.950000 0.012568\n10.950000 0.012568 11.100000 0.003251\n11.100000 0.003251 11.250000 -0.006141\n11.250000 -0.006141 11.400000 -0.015553\n11.400000 -0.015553 11.550000 -0.024928\n11.550000 -0.024928 11.700000 -0.034209\n11.700000 -0.034209 11.850000 -0.043341\n11.850000 -0.043341 12.000000 -0.052268\n12.000000 -0.052268 12.150000 -0.060934\n12.150000 -0.060934 12.300000 -0.069288\n12.300000 -0.069288 12.450000 -0.077275\n12.450000 -0.077275 12.600000 -0.084847\n12.600000 -0.084847 12.750000 -0.091955\n12.750000 -0.091955 12.900000 -0.098554\n12.900000 -0.098554 13.050000 -0.104601\n13.050000 -0.104601 13.200000 -0.110057\n13.200000 -0.110057 13.350000 -0.114885\n13.350000 -0.114885 13.500000 -0.119053\n13.500000 -0.119053 13.650000 -0.122532\n13.650000 -0.122532 13.800000 -0.125296\n13.800000 -0.125296 13.950000 -0.127325\n13.950000 -0.127325 14.100000 -0.128603\n14.100000 -0.128603 14.250000 -0.129116\n14.250000 -0.129116 14.400000 -0.128858\n14.400000 -0.128858 14.550000 -0.127825\n14.550000 -0.127825 14.700000 -0.126019\n14.700000 -0.126019 14.850000 -0.123446\n14.850000 -0.123446 15.000000 -0.120117\n15.000000 -0.120117 15.150000 -0.116047\n15.150000 -0.116047 15.300000 -0.111257\n15.300000 -0.111257 15.450000 -0.105770\n15.450000 -0.105770 15.600000 -0.099616\n15.600000 -0.099616 15.750000 -0.092827\n15.750000 -0.092827 15.900000 -0.085440\n15.900000 -0.085440 16.050000 -0.077496\n16.050000 -0.077496 16.200000 -0.069040\n16.200000 -0.069040 16.350000 -0.060119\n16.350000 -0.060119 16.500000 -0.050784\n16.500000 -0.050784 16.650000 -0.041087\n16.650000 -0.041087 16.800000 -0.031087\n16.800000 -0.031087 16.950000 -0.020839\n16.950000 -0.020839 17.100000 -0.010405\n17.100000 -0.010405 17.250000 0.000154\n17.250000 0.000154 17.400000 0.010775\n17.400000 0.010775 17.550000 0.021395\n17.550000 0.021395 17.700000 0.031951\n17.700000 0.031951 17.850000 0.042379\n17.850000 0.042379 18.000000 0.052614\n18.000000 0.052614 18.150000 0.062596\n18.150000 0.062596 18.300000 0.072261\n18.300000 0.072261 18.450000 0.081552\n18.450000 0.081552 18.600000 0.090408\n18.600000 0.090408 18.750000 0.098776\n18.750000 0.098776 18.900000 0.106600\n18.900000 0.106600 19.050000 0.113833\n19.050000 0.113833 19.200000 0.120425\n19.200000 0.120425 19.350000 0.126335\n19.350000 0.126335 19.500000 0.131522\n19.500000 0.131522 19.650000 0.135951\n19.650000 0.135951 19.800000 0.139591\n19.800000 0.139591 19.950000 0.142415\n19.950000 0.142415 20.100000 0.144402\n20.100000 0.144402 20.250000 0.145534\n20.250000 0.145534 20.400000 0.145800\n20.400000 0.145800 20.550000 0.145192\n20.550000 0.145192 20.700000 0.143710\n20.700000 0.143710 20.850000 0.141356\n20.850000 0.141356 21.000000 0.138141\n21.000000 0.138141 21.150000 0.134077\n21.150000 0.134077 21.300000 0.129184\n21.300000 0.129184 21.450000 0.123487\n21.450000 0.123487 21.600000 0.117015\n21.600000 0.117015 21.750000 0.109802\n21.750000 0.109802 21.900000 0.101887\n21.900000 0.101887 22.050000 0.093313\n22.050000 0.093313 22.200000 0.084127\n22.200000 0.084127 22.350000 0.074382\n22.350000 0.074382 22.500000 0.064132\n22.500000 0.064132 22.650000 0.053436\n22.650000 0.053436 22.800000 0.042355\n22.800000 0.042355 22.950000 0.030953\n22.950000 0.030953 23.100000 0.019297\n23.100000 0.019297 23.250000 0.007456\n23.250000 0.007456 23.400000 -0.004502\n23.400000 -0.004502 23.550000 -0.016504\n23.550000 -0.016504 23.700000 -0.028479\n23.700000 -0.028479 23.850000 -0.040355\n23.850000 -0.040355 24.000000 -0.052060\n24.000000 -0.052060 24.150000 -0.063523\n24.150000 -0.063523 24.300000 -0.074674\n24.300000 -0.074674 24.450000 -0.085443\n24.450000 -0.085443 24.600000 -0.095765\n24.600000 -0.095765 24.750000 -0.105573\n24.750000 -0.105573 24.900000 -0.114808\n24.900000 -0.114808 25.050000 -0.123408\n25.050000 -0.123408 25.200000 -0.131320\n25.200000 -0.131320 25.350000 -0.138492\n25.350000 -0.138492 25.500000 -0.144876\n25.500000 -0.144876 25.650000 -0.150428\n25.650000 -0.150428 25.800000 -0.155112\n25.800000 -0.155112 25.950000 -0.158892\n25.950000 -0.158892 26.100000 -0.161742\n26.100000 -0.161742 26.250000 -0.163639\n26.250000 -0.163639 26.400000 -0.164566\n26.400000 -0.164566 26.550000 -0.164510\n26.550000 -0.164510 26.700000 -0.163467\n26.700000 -0.163467 26.850000 -0.161437\n26.850000 -0.161437 27.000000 -0.158426\n27.000000 -0.158426 27.150000 -0.154447\n27.150000 -0.154447 27.300000 -0.149517\n27.300000 -0.149517 27.450000 -0.143660\n27.450000 -0.143660 27.600000 -0.136907\n27.600000 -0.136907 27.750000 -0.129291\n27.750000 -0.129291 27.900000 -0.120854\n27.900000 -0.120854 28.050000 -0.111641\n28.050000 -0.111641 28.200000 -0.101703\n28.200000 -0.101703 28.350000 -0.091095\n28.350000 -0.091095 28.500000 -0.079877\n28.500000 -0.079877 28.650000 -0.068112\n28.650000 -0.068112 28.800000 -0.055869\n28.800000 -0.055869 28.950000 -0.043216\n28.950000 -0.043216 29.100000 -0.030228\n29.100000 -0.030228 29.250000 -0.016981\n29.250000 -0.016981 29.400000 -0.003553\n29.400000 -0.003553 29.550000 0.009978\n29.550000 0.009978 29.700000 0.023529\n29.700000 0.023529 29.850000 0.037021\n29.850000 0.037021 30.000000 0.050372\n# title Expliziter Euler, n=200\n# x-label t [s]\n# y-label x(t) [m]\n", "MIMEtype" : "application/x-vgf"}',
      data: [],
      layout: {
        title: "My graph",
      },
      datasetList: [],
      currentIndex: 1,
      enableAutoPlay: false,
      imageConfig: {
        format: 'svg',
        filename: 'graph'
      }
    };
  },
  watch: {
    enableAutoPlay() {
      this.watchAutoPlayOrPause();
    },
  },
  mounted() {
    // parse file
    var parseTest = new LinePlotParser.LineParser(this.plotData);
    var testJson = parseTest.parseFileToJson();
    this.datasetList = parseTest.parseValues(testJson);
    // render first plot
    this.createLinePlot(0);
  },
  methods: {
    createLinePlot: function (index) {
      let currentDataset = this.datasetList[index];
      let title = currentDataset.getTitle();
      this.layout = {
        title: title,
        xaxis: {
          title: {
            text: currentDataset.getLabelX(),
          },
        },
        yaxis: {
          title: {
            text: currentDataset.getLabelY(),
          },
        },
        showlegend: true
      };
      let graphs = currentDataset.getAllGraphs();

      for (let t = 0; t < graphs.length; t++) {
        let currentGraph = graphs[t];
        let lines = currentGraph.getLines();
        let x = [];
        let y = [];
        for (let i = 0; i < lines.length; i++) {
          let line = lines[i];
          x.push(line[0]);
          y.push(line[1]);
          x.push(line[2]);
          y.push(line[3]);
        }

        let trace = {
          x: x,
          y: y,
          name: currentGraph.getLegend(),
          line: {
            color: currentGraph.getColor(),
            dash: currentGraph.getLinestyle(),
          },
          type: "scatter",
        };
        this.data.push(trace);
      }
    },
    resetFileIndex: function () {
      this.currentIndex = 1;
      this.data = [];
      this.createLinePlot(this.currentIndex - 1);
    },
    setMaxFileIndex: function () {
      this.currentIndex = this.datasetList.length;
      this.data = [];
      this.createLinePlot(this.currentIndex - 1);
    },
    increaseFileIndex: function () {
      if (this.currentIndex < this.datasetList.length) {
        this.currentIndex++;
      } else {
        this.currentIndex = this.datasetList.length;
      }
      this.data = [];
      this.createLinePlot(this.currentIndex - 1);
    },
    decreaseFileIndex: function () {
      if (this.currentIndex > 1) {
        this.currentIndex--;
      } else {
        this.currentIndex = 1;
      }
      this.data = [];
      this.createLinePlot(this.currentIndex - 1);
    },
    setEnableAutoPlay: function () {
      this.enableAutoPlay = !this.enableAutoPlay;
      return this.enableAutoPlay;
    },
    watchAutoPlayOrPause: function () {
      if (this.enableAutoPlay) {
        this.interval = setInterval(
          function () {
            this.increaseFileIndex();
          }.bind(this),
          1000
        );
      } else {
        clearInterval(this.interval);
      }
    },
  },
};
</script>

<!-- Add "scoped" attribute to limit CSS to this component only -->
<style scoped>

.a2dplot-component {
  border-radius: calc(0.25rem - 1px);
}

.file-controller {
  bottom: 0;
  left: 0;
  right: 0;
  min-height: 66px;
  padding: 12px;
  background: rgba(0, 0, 0, 0.15);
  display: flex;
  align-items: center;
  justify-content: space-between;
  color: #6c757d;
}

.fixed-row-70 {
  flex-grow: 0;
  flex-shrink: 0;
}

div.btn-group {
  margin: 0 auto;
  text-align: center;
  width: 100%;
  display: inline-block;
}

div.btn-group > .btn {
  margin: 0 0 1px 1px;
}

</style>
